<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homeowner Manual - Cascade Builder Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #f8f9fa 0%, #e9ecef 100%);
        }
        
        .tab-button {
            transition: all 0.2s ease;
        }
        
        .tab-button:hover {
            transform: translateY(-1px);
        }
        
        .tab-button.active {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .spinner {
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 0.6s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        iframe {
            border: none;
            width: 100%;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="max-w-7xl mx-auto p-4 md:p-6">
        <!-- Main Container -->
        <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-200">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
                <div class="mb-4">
                    <h1 class="text-2xl font-semibold text-gray-800">Homeowner Manual</h1>
                    <p class="text-sm text-gray-600 mt-1" id="sectionTitle">Cover & Quick Reference</p>
                </div>

                <!-- Section Navigation Tabs -->
                <div class="flex items-center gap-2 flex-wrap">
                    <button onclick="navigateToSection(1)" class="tab-button active px-3 py-1.5 rounded-lg text-xs font-medium" style="background-color: #3C6B80; color: white;" data-section="1">
                        Cover & Quick Reference
                    </button>
                    <button onclick="navigateToSection(2)" class="tab-button px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200" data-section="2">
                        Understanding Your Warranty Team
                    </button>
                    <button onclick="navigateToSection(3)" class="tab-button px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200" data-section="3">
                        Emergency: No Heat
                    </button>
                    <button onclick="navigateToSection(4)" class="tab-button px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200" data-section="4">
                        Emergency: Plumbing Leaks
                    </button>
                    <button onclick="navigateToSection(5)" class="tab-button px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200" data-section="5">
                        Glossary & Contacts
                    </button>
                    <button onclick="navigateToSection(6)" class="tab-button px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200" data-section="6">
                        Contact & Notes
                    </button>
                </div>
            </div>
            
            <!-- Manual Content -->
            <div id="manualContainer" style="height: calc(100vh - 280px); min-height: 400px; overflow: hidden;">
                <iframe 
                    id="manualIframe"
                    src="/complete_homeowner_manual.html" 
                    title="Homeowner Manual"
                    style="height: 100%;"
                ></iframe>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 1;
        const sections = [
            { id: 1, title: 'Cover & Quick Reference', selector: '.cover' },
            { id: 2, title: 'Understanding Your Warranty Team', selector: 'body > .page:nth-of-type(3)' },
            { id: 3, title: 'Emergency: No Heat', selector: 'body > .page:nth-of-type(4)' },
            { id: 4, title: 'Emergency: Plumbing Leaks', selector: 'body > .page:nth-of-type(5)' },
            { id: 5, title: 'Glossary & Contacts', selector: 'body > .page:nth-of-type(6)' },
            { id: 6, title: 'Contact & Notes', selector: 'body > .page:nth-of-type(7)' }
        ];

        function navigateToSection(sectionId) {
            currentSection = sectionId;
            const section = sections.find(s => s.id === sectionId);
            if (!section) return;

            // Update section title
            document.getElementById('sectionTitle').textContent = section.title;

            // Update tab styles
            document.querySelectorAll('.tab-button').forEach(btn => {
                const btnSection = parseInt(btn.getAttribute('data-section'));
                if (btnSection === sectionId) {
                    btn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                    btn.classList.add('active');
                    btn.style.backgroundColor = '#3C6B80';
                    btn.style.color = 'white';
                } else {
                    btn.classList.remove('active');
                    btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                    btn.style.backgroundColor = '';
                    btn.style.color = '';
                }
            });

            // Scroll iframe to section
            const iframe = document.getElementById('manualIframe');
            if (iframe && iframe.contentWindow && iframe.contentWindow.document) {
                const iframeDoc = iframe.contentWindow.document;
                const element = iframeDoc.querySelector(section.selector);
                
                if (element) {
                    // Add small delay to ensure rendering is complete
                    setTimeout(() => {
                        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        console.log('Scrolled to section:', sectionId, section.title, element);
                    }, 50);
                } else {
                    console.error('Element not found for selector:', section.selector);
                }
            }
        }

        // Wait for iframe to load before enabling navigation
        window.addEventListener('load', () => {
            const iframe = document.getElementById('manualIframe');
            iframe.addEventListener('load', () => {
                // Initialize to first section
                navigateToSection(1);
            });
        });
    </script>
</body>
</html>

