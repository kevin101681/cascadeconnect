[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"
  NPM_VERSION = "10"

[functions]
  node_bundler = "esbuild"
  included_files = ["netlify/functions/**"]

# Extended timeout and memory for upload function (especially for mobile uploads)
[functions.upload]
  timeout = 120
  memory = 3008  # Increase memory to 3GB for large file uploads

# Note: Environment variables should be set in Netlify dashboard, not here
# This file only contains build configuration, no secrets

[build.processing]
  skip_processing = false

[build.processing.css]
  bundle = true
  minify = true

[build.processing.js]
  bundle = true
  minify = true

[build.processing.html]
  pretty_urls = false

# Headers for static HTML files to ensure they're served correctly
[[headers]]
  for = "/complete_homeowner_manual.html"
  [headers.values]
    Content-Type = "text/html; charset=UTF-8"
    Cache-Control = "public, max-age=0, must-revalidate"

[[headers]]
  for = "/homeowner-manual.html"
  [headers.values]
    Content-Type = "text/html; charset=UTF-8"
    Cache-Control = "public, max-age=0, must-revalidate"

# Redirects for SPA routing (handled by public/_redirects)
# All routes redirect to index.html for client-side routing
# API routes are handled in public/_redirects (processed first)

