{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://cascadeconnect.com/schemas/vapi-punchlist-extraction.json",
  "title": "Cascade Connect - Construction Warranty Call Extraction",
  "description": "Structured data extraction schema for construction warranty and punch list phone calls. Extracts homeowner information, property address, and issue details for database storage and claim processing.",
  "type": "object",
  "properties": {
    "propertyAddress": {
      "type": "string",
      "description": "The complete physical address of the property or job site mentioned in the call. Extract the full street address including house number, street name, city, state, and zip code if provided. If only partial address is given (e.g., '123 Main Street'), include what is available. Look for phrases like 'my address is', 'the property at', 'the house on', or 'job site location'. This is critical for matching the caller to existing homeowner records.",
      "minLength": 5,
      "maxLength": 300,
      "examples": [
        "1234 Maple Street, Seattle, WA 98101",
        "456 Oak Avenue, Unit 3B, Portland, OR 97201",
        "789 Pine Road, Bellevue, Washington"
      ]
    },
    "homeownerName": {
      "type": "string",
      "description": "The full name of the homeowner or caller as stated in the conversation. Extract both first and last name if provided. Listen for self-introductions like 'This is...', 'My name is...', or 'I'm calling, this is...'. If only a first name is given, use that. If the caller doesn't provide their name, use 'Not Provided' rather than leaving blank.",
      "minLength": 2,
      "maxLength": 150,
      "examples": [
        "John Smith",
        "Mary Johnson-Davis",
        "Robert Chen",
        "Not Provided"
      ]
    },
    "phoneNumber": {
      "type": "string",
      "description": "The best contact phone number for follow-up. This may be explicitly stated by the caller (e.g., 'You can reach me at...', 'My number is...') or it may be the incoming caller ID. Extract numbers in any format provided. Include area code if mentioned. If no phone number is explicitly mentioned and the system doesn't provide caller ID, use 'Not Provided'.",
      "minLength": 7,
      "maxLength": 20,
      "pattern": "^[0-9()+\\-\\s.ext]*$|^Not Provided$",
      "examples": [
        "(206) 555-0123",
        "555-1234",
        "206-555-0199 ext 45",
        "Not Provided"
      ]
    },
    "issueDescription": {
      "type": "string",
      "description": "A comprehensive summary of the specific issue, defect, warranty claim, or punch list item described by the caller. Include the location within the home (e.g., 'master bathroom', 'kitchen', 'garage'), the specific problem (e.g., 'leaking faucet', 'cracked tile', 'door won't close'), and any relevant details about when it started or severity. Extract direct quotes where helpful. If multiple issues are mentioned, list all of them. This field is used to create warranty claims, so detail is important.",
      "minLength": 10,
      "maxLength": 2000,
      "examples": [
        "Master bathroom shower is leaking water onto the floor. Started 3 days ago and getting worse. Water is coming from around the shower door seal.",
        "Kitchen cabinet door in the upper left section won't stay closed. Hinge appears loose or broken. Has been an issue since move-in.",
        "Crack in the driveway concrete near the garage door. About 2 feet long and widening. Caller concerned about further damage."
      ]
    },
    "isUrgent": {
      "type": "boolean",
      "description": "Set to true ONLY if the caller explicitly expresses that this is an emergency, safety hazard, or requires immediate attention. Listen for urgent language such as: 'emergency', 'urgent', 'ASAP', 'right away', 'immediately', 'dangerous', 'safety hazard', 'can't use', 'active leak', 'water everywhere', 'electrical sparks', 'gas smell', 'no heat', 'no water', 'broken window'. General complaints or standard warranty items should be false. When in doubt, default to false unless clear urgency indicators are present.",
      "default": false,
      "examples": [
        true,
        false
      ]
    },
    "callIntent": {
      "type": "string",
      "description": "The primary reason or intent of the call. Determine based on what the caller is requesting. Choose ONE of the following: 'new_claim' (reporting a new issue/defect for the first time), 'existing_claim_status' (asking about status of previously reported issue), 'scheduling' (wants to schedule or reschedule an appointment), 'emergency' (immediate urgent safety issue requiring same-day response), 'other' (general inquiry, billing question, or anything else). Default to 'new_claim' if the caller is describing a construction problem or defect.",
      "enum": [
        "new_claim",
        "existing_claim_status",
        "scheduling",
        "emergency",
        "other"
      ],
      "default": "new_claim",
      "examples": [
        "new_claim",
        "existing_claim_status",
        "scheduling",
        "emergency",
        "other"
      ]
    }
  },
  "required": [
    "propertyAddress",
    "homeownerName",
    "phoneNumber",
    "issueDescription",
    "isUrgent",
    "callIntent"
  ],
  "additionalProperties": false,
  "examples": [
    {
      "propertyAddress": "1234 Cedar Lane, Seattle, WA 98105",
      "homeownerName": "Sarah Mitchell",
      "phoneNumber": "(206) 555-0187",
      "issueDescription": "Master bedroom ceiling has a water stain and is starting to bubble. Appears to be coming from the roof or attic. Noticed it after last week's heavy rain.",
      "isUrgent": false,
      "callIntent": "new_claim"
    },
    {
      "propertyAddress": "5678 Elm Street, Redmond, Washington",
      "homeownerName": "David Thompson",
      "phoneNumber": "425-555-0234",
      "issueDescription": "Active water leak in the basement utility room. Water is pooling on the floor and the sump pump doesn't seem to be working. Caller says it's flooding.",
      "isUrgent": true,
      "callIntent": "emergency"
    },
    {
      "propertyAddress": "910 Oak Avenue, Bellevue, WA 98004",
      "homeownerName": "Jennifer Lee",
      "phoneNumber": "Not Provided",
      "issueDescription": "Front door doesn't close properly. There's a gap at the bottom and cold air is coming in. Lock mechanism is also sticking.",
      "isUrgent": false,
      "callIntent": "new_claim"
    }
  ]
}

